import{u as t,c as e,b as s,i,a as r,F as l,t as o,d as a}from"./index.js";import{L as n}from"./ListErrors-a14f68ff.js";const d=o('<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What\'s this article about?"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags"><div class="tag-list"></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button">Publish Article</button></fieldset></form></div></div></div></div>',29),c=o('<span class="tag-default tag-pill"><i class="ion-close-round"></i></span>',4);a(["keyup","click"]);export default({slug:o})=>{const[a,{createArticle:v,updateArticle:g}]=t(),[u,f]=e({tagInput:"",tagList:[]}),p=t=>e=>f(t,e.target.value),_=()=>{u.tagInput&&f(t=>{t.tagList.push(t.tagInput.trim()),t.tagInput=""})},h=t=>{!u.inProgress&&f("tagList",e=>e.filter(e=>e!==t))},$=t=>{switch(t.keyCode){case 13:case 9:case 188:9!==t.keyCode&&t.preventDefault(),_()}},b=t=>{t.preventDefault(),f({inProgress:!0});const{inProgress:e,tagsInput:s,...i}=u;(o?g:v)(i).then(t=>location.hash="/article/"+t.slug).catch(t=>f({errors:t})).finally(()=>f({inProgress:!1}))};return s(()=>{let t;o&&(t=a.articles[o])&&f(t)}),(()=>{const t=d.cloneNode(!0),e=t.firstChild.firstChild.firstChild,o=e.firstChild,a=o.firstChild.firstChild,v=a.firstChild,g=a.nextSibling,f=g.firstChild,m=g.nextSibling,x=m.firstChild,y=m.nextSibling,C=y.firstChild,P=C.nextSibling,k=y.nextSibling;return i(e,r(n,{get errors(){return u.errors}}),o),v.onchange=p("title"),f.onchange=p("description"),x.onchange=p("body"),C.__keyup=$,C.onblur=_,C.onchange=p("tagInput"),i(P,r(l,{get each(){return u.tagList},children:t=>(()=>{const e=c.cloneNode(!0),s=e.firstChild;return s.__click=h,s.__clickData=t,i(e,t,null),e})()})),k.__click=b,s(t=>{const e=u.title,s=u.inProgress,i=u.description,r=u.inProgress,l=u.body,o=u.inProgress,a=u.tagInput,n=u.inProgress,d=u.inProgress;return e!==t._v$&&(v.value=t._v$=e),s!==t._v$2&&(v.disabled=t._v$2=s),i!==t._v$3&&(f.value=t._v$3=i),r!==t._v$4&&(f.disabled=t._v$4=r),l!==t._v$5&&(x.value=t._v$5=l),o!==t._v$6&&(x.disabled=t._v$6=o),a!==t._v$7&&(C.value=t._v$7=a),n!==t._v$8&&(C.disabled=t._v$8=n),d!==t._v$9&&(k.disabled=t._v$9=d),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),t})()};
