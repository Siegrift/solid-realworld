import{u as z,c as B,h as G,i as h,a as A,b as f,F as H,d as J,t as D,e as M}from"./index.d61504ba.js";import{L as O}from"./ListErrors.b204808f.js";const Q=D(`<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What's this article about?"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags"><div class="tag-list"></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button">Publish Article</button></fieldset></form></div></div></div></div>`),U=D('<span class="tag-default tag-pill"><i class="ion-close-round"></i></span>');var Y=({slug:v})=>{const[T,{createArticle:F,updateArticle:N}]=z(),[i,r]=B({tagInput:"",tagList:[]}),o=t=>l=>r(t,l.target.value),p=()=>{i.tagInput&&r(t=>{t.tagList.push(t.tagInput.trim()),t.tagInput=""})},R=t=>{!i.inProgress&&r("tagList",l=>l.filter(c=>c!==t))},W=t=>{switch(t.keyCode){case 13:case 9:case 188:t.keyCode!==9&&t.preventDefault(),p();break}},K=t=>{t.preventDefault(),r({inProgress:!0});const{inProgress:l,tagsInput:c,...u}=i;(v?N:F)(u).then(s=>location.hash=`/article/${s.slug}`).catch(s=>r({errors:s})).finally(()=>r({inProgress:!1}))};return G(()=>{let t;!v||!(t=T.articles[v])||r(t)}),(()=>{const t=Q.cloneNode(!0),l=t.firstChild,c=l.firstChild,u=c.firstChild,s=u.firstChild,j=s.firstChild,m=j.firstChild,g=m.firstChild,b=m.nextSibling,$=b.firstChild,C=b.nextSibling,_=C.firstChild,y=C.nextSibling,a=y.firstChild,q=a.nextSibling,x=y.nextSibling;return h(u,A(O,{get errors(){return i.errors}}),s),f(g,"change",o("title")),f($,"change",o("description")),f(_,"change",o("body")),a.$$keyup=W,a.addEventListener("blur",p),f(a,"change",o("tagInput")),h(q,A(H,{get each(){return i.tagList},children:e=>(()=>{const n=U.cloneNode(!0),d=n.firstChild;return d.$$click=R,d.$$clickData=e,h(n,e,null),n})()})),x.$$click=K,J(e=>{const n=i.title,d=i.inProgress,k=i.description,P=i.inProgress,S=i.body,I=i.inProgress,L=i.tagInput,E=i.inProgress,w=i.inProgress;return n!==e._v$&&(g.value=e._v$=n),d!==e._v$2&&(g.disabled=e._v$2=d),k!==e._v$3&&($.value=e._v$3=k),P!==e._v$4&&($.disabled=e._v$4=P),S!==e._v$5&&(_.value=e._v$5=S),I!==e._v$6&&(_.disabled=e._v$6=I),L!==e._v$7&&(a.value=e._v$7=L),E!==e._v$8&&(a.disabled=e._v$8=E),w!==e._v$9&&(x.disabled=e._v$9=w),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),t})()};M(["keyup","click"]);export{Y as default};
