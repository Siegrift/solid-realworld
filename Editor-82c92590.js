import{u as t,c as e,b as s,i,a as r,F as l,e as o,t as a,d as n}from"./index.js";import{L as d}from"./ListErrors-13d37085.js";const c=a('<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What\'s this article about?"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags"><div class="tag-list"></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button">Publish Article</button></fieldset></form></div></div></div></div>',29),v=a('<span class="tag-default tag-pill"><i class="ion-close-round"></i></span>',4),g=["errors"],u=["each"];n(["keyup","click"]);export default({slug:a})=>{const[n,{createArticle:f,updateArticle:p}]=t(),[_,h]=e({tagInput:"",tagList:[]}),$=t=>e=>h(t,e.target.value),b=()=>{_.tagInput&&h(t=>{t.tagList.push(t.tagInput.trim()),t.tagInput=""})},m=t=>{!_.inProgress&&h("tagList",e=>e.filter(e=>e!==t))},x=t=>{switch(t.keyCode){case 13:case 9:case 188:9!==t.keyCode&&t.preventDefault(),b()}},y=t=>{t.preventDefault(),h({inProgress:!0});const{inProgress:e,tagsInput:s,...i}=_;(a?p:f)(i).then(t=>location.hash="/article/"+t.slug).catch(t=>h({errors:t})).finally(()=>h({inProgress:!1}))};return s(()=>{let t;a&&(t=n.articles[a])&&h(t)}),(()=>{const t=c.cloneNode(!0),e=t.firstChild.firstChild.firstChild,s=e.firstChild,a=s.firstChild.firstChild,n=a.firstChild,f=a.nextSibling,p=f.firstChild,h=f.nextSibling,C=h.firstChild,P=h.nextSibling,k=P.firstChild,I=k.nextSibling,L=P.nextSibling;return i(e,r(d,{errors:()=>_.errors},g),s),n.onchange=$("title"),p.onchange=$("description"),C.onchange=$("body"),k.__keyup=x,k.onblur=b,k.onchange=$("tagInput"),i(I,r(l,{each:()=>_.tagList,children:t=>(()=>{const e=v.cloneNode(!0),s=e.firstChild;return s.__click=m,s.__clickData=t,i(e,t,null),e})()},u)),L.__click=y,o(t=>{const e=_.title,s=_.inProgress,i=_.description,r=_.inProgress,l=_.body,o=_.inProgress,a=_.tagInput,d=_.inProgress,c=_.inProgress;return e!==t._v$&&(n.value=t._v$=e),s!==t._v$2&&(n.disabled=t._v$2=s),i!==t._v$3&&(p.value=t._v$3=i),r!==t._v$4&&(p.disabled=t._v$4=r),l!==t._v$5&&(C.value=t._v$5=l),o!==t._v$6&&(C.disabled=t._v$6=o),a!==t._v$7&&(k.value=t._v$7=a),d!==t._v$8&&(k.disabled=t._v$8=d),c!==t._v$9&&(L.disabled=t._v$9=c),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),t})()};
