import{u as t,c as e,e as s,i,a as r,F as l,b as o,t as a,d as n}from"./index.js";import{L as d}from"./ListErrors-28244044.js";const c=a('<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" class="form-control form-control-lg" placeholder="Article Title"></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="What\'s this article about?"></fieldset><fieldset class="form-group"><textarea class="form-control" rows="8" placeholder="Write your article (in markdown)"></textarea></fieldset><fieldset class="form-group"><input type="text" class="form-control" placeholder="Enter tags"><div class="tag-list"></div></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button">Publish Article</button></fieldset></form></div></div></div></div>',29),v=a('<span class="tag-default tag-pill"><i class="ion-close-round"></i></span>',4);n(["keyup","click"]);export default({slug:a})=>{const[n,{createArticle:g,updateArticle:u}]=t(),[f,p]=e({tagInput:"",tagList:[]}),_=t=>e=>p(t,e.target.value),h=()=>{f.tagInput&&p(t=>{t.tagList.push(t.tagInput.trim()),t.tagInput=""})},$=t=>{!f.inProgress&&p("tagList",e=>e.filter(e=>e!==t))},b=t=>{switch(t.keyCode){case 13:case 9:case 188:9!==t.keyCode&&t.preventDefault(),h()}},m=t=>{t.preventDefault(),p({inProgress:!0});const{inProgress:e,tagsInput:s,...i}=f;(a?u:g)(i).then(t=>location.hash="/article/"+t.slug).catch(t=>p({errors:t})).finally(()=>p({inProgress:!1}))};return s(()=>{let t;a&&(t=n.articles[a])&&p(t)}),(()=>{const t=c.cloneNode(!0),e=t.firstChild.firstChild.firstChild,s=e.firstChild,a=s.firstChild.firstChild,n=a.firstChild,g=a.nextSibling,u=g.firstChild,p=g.nextSibling,x=p.firstChild,y=p.nextSibling,C=y.firstChild,P=C.nextSibling,k=y.nextSibling;return i(e,r(d,{get errors(){return f.errors}}),s),n.onchange=_("title"),u.onchange=_("description"),x.onchange=_("body"),C.__keyup=b,C.onblur=h,C.onchange=_("tagInput"),i(P,r(l,{get each(){return f.tagList},children:t=>(()=>{const e=v.cloneNode(!0),s=e.firstChild;return s.__click=$,s.__clickData=t,i(e,t,null),e})()})),k.__click=m,o(t=>{const e=f.title,s=f.inProgress,i=f.description,r=f.inProgress,l=f.body,o=f.inProgress,a=f.tagInput,d=f.inProgress,c=f.inProgress;return e!==t._v$&&(n.value=t._v$=e),s!==t._v$2&&(n.disabled=t._v$2=s),i!==t._v$3&&(u.value=t._v$3=i),r!==t._v$4&&(u.disabled=t._v$4=r),l!==t._v$5&&(x.value=t._v$5=l),o!==t._v$6&&(x.disabled=t._v$6=o),a!==t._v$7&&(C.value=t._v$7=a),d!==t._v$8&&(C.disabled=t._v$8=d),c!==t._v$9&&(k.disabled=t._v$9=c),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),t})()};
